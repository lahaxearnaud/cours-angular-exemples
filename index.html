<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Example 6</title>
    <!-- Inclusion de la lib angular-->
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-route/angular-route.js"></script>

    <script>
        // creation de lu module angular
        var app = angular.module('exampleApp', ['ngRoute']);

        // creation du controleur
        app.controller('homeCtrl', function($scope, UserService) {
            $scope.personnes = UserService.list();

            $scope.me = UserService.find(1);


            $scope.personnesAfterDelete = UserService.list();


            $scope.delete = function(id) {
                UserService.delete(id);
            };

            $scope.formData = {
                name: ''
            };

            $scope.create = function() {
                UserService.create($scope.formData);
                $scope.formData = {
                    name: ''
                };
            };
        });


        app.config(function($routeProvider) {
            $routeProvider
                .when('/home', {
                    templateUrl: 'views/home.html',
                    controller: 'homeCtrl'
                })
                .otherwise({
                    redirectTo: '/home'
                });
        });

        app.provider('UserService', function () {
            var personnes = {
                1:{
                    "name": "Margo Ferguson"
                },
                2:{
                    "name": "Lucas Barnett"
                },
                3:{
                    "name": "Dickerson Sharpe"
                },
                4:{
                    "name": "Dollie Michael"
                },
                5:{
                    "name": "Winters Salinas"
                }
            };

            this.$get = function() {
                return {
                    list: function () {
                        return personnes;
                    },

                    find: function (id) {
                        return personnes[id];
                    },

                    delete: function (id) {
                        delete personnes[id];
                    },

                    create: function (data) {
                        // just for demo
                        var id = (Math.random() + '').replace('0.', '');
                        personnes[id] = data;
                    }
                }
            };
        });

    </script>
</head>
<!-- Creation de l'app angular-->
<body ng-app="exampleApp">
    <!-- Appel du controleur -->
    <section>
        <h2>Example 6</h2>

        <div ng-view></div>

    </section>
</body>
</html>